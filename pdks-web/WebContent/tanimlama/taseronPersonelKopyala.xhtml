<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:s="http://jboss.com/products/seam/taglib" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j" template="/layout/template.xhtml">
	<ui:define name="title">
		<h:outputText value="#{ortakIslemler.getMenuAdi('taseronPersonelKopyala')}" />
	</ui:define>
	<ui:define name="body">

		<h:form id="taseronPersonelKopyalaForm">



			<rich:panel style="vardiyaGun" header="#{ortakIslemler.getMenuUserAdi(taseronPersonelKopyalaHome.session,'taseronPersonelKopyala')}">
				<h:panelGrid columns="2" cellpadding="0" cellspacing="0" id="dosyaSec">
					<s:decorate template="/layout/edit.xhtml">
						<ui:define name="label">#{ortakIslemler.sirketAciklama()}</ui:define>
						<h:selectOneMenu id="sirketSec" value="#{taseronPersonelKopyalaHome.sirketId}" disabled="#{taseronPersonelKopyalaHome.sirketList.size()==1}">
							<f:selectItem itemLabel="Lütfen seçiniz" />
							<f:selectItems value="#{taseronPersonelKopyalaHome.sirketList}" />
							<a4j:support event="onchange" status="ajaxStatus" ajaxSingle="true" />
						</h:selectOneMenu>
					</s:decorate>
					<s:decorate template="/layout/edit.xhtml">
						<ui:define name="label">İşe Başlangıç Tarih</ui:define>
						<rich:calendar value="#{taseronPersonelKopyalaHome.basSirketTarih}" datePattern="#{authenticatedUser.dateFormat}">
							<a4j:support event="onchanged" ajaxSingle="true" status="ajaxStatus" />

						</rich:calendar>
					</s:decorate>

				</h:panelGrid>
				<a4j:outputPanel ajaxRendered="true" id="anaForm">
					<h:messages id="messages" styleClass="message" errorClass="errormsg" infoClass="infomsg" warnClass="warnmsg" />
				</a4j:outputPanel>
				<a4j:outputPanel id="personelList">
					<h:panelGrid columns="1" cellpadding="0" cellspacing="0">

						<rich:fileUpload fileUploadListener="#{taseronPersonelKopyalaHome.listener}" listHeight="50px" listWidth="300px"
							sizeErrorLabel="Dosya boyutu büyük" maxFilesQuantity="1" immediateUpload="true" acceptedTypes="xls,xlsx"
							transferErrorLabel="Personel dosyası hatalı yüklenmiştir" doneLabel="Bitti" addControlLabel="Excel Dosya Seçin"
							uploadControlLabel="Dosya Kaydet" cancelEntryControlLabel="Temizle" allowFlash="false">
							<a4j:support event="onuploadcomplete" ajaxSingle="true" reRender="personelList" action="#{taseronPersonelKopyalaHome.personelList.clear()}" />
						</rich:fileUpload>



					</h:panelGrid>

					<rich:panel rendered="#{taseronPersonelKopyalaHome.file.data!=null}">
						<h:panelGrid columns="1">
							<h:outputText value="Dosya Adı : #{taseronPersonelKopyalaHome.file.name}" />

							<a4j:commandButton value="Taşeron Veri Oku" action="#{taseronPersonelKopyalaHome.taseronVeriOku}" reRender="personelList"
								rendered="#{empty taseronPersonelKopyalaHome.personelList}" />
							<a4j:commandButton value="Taşeron Veri Kopyala" action="#{taseronPersonelKopyalaHome.taseronKopyala}" reRender="personelList"
								rendered="#{taseronPersonelKopyalaHome.sorunYok and not empty taseronPersonelKopyalaHome.personelList}" />
							<rich:toolTip for="yoneticiVeri">
								<TABLE class="rich-table">
									<thead class="rich-table-thead">
										<tr class="rich-table-subheader">
											<TH>#{ortakIslemler.personelNoAciklama()}</TH>
											<TH>#{ortakIslemler.kimlikNoAciklama()}</TH>
											<TH>Yeni #{ortakIslemler.personelNoAciklama()}</TH>

										</TR>
									</thead>
									<tbody>
										<TR class="acik">
											<TD align="center">9000144</TD>
											<TD align="center">99459666764</TD>
											<TD>9000440</TD>

										</TR>
										<TR class="koyu">
											<TD align="center">9000348</TD>
											<TD align="center">99825138344</TD>
											<TD>9000446</TD>

										</TR>

									</tbody>
								</TABLE>
							</rich:toolTip>





						</h:panelGrid>
					</rich:panel>
					<ui:fragment rendered="#{not empty taseronPersonelKopyalaHome.personelList}">
						<rich:dataTable rowClasses="acik,koyu" var="personel" value="#{taseronPersonelKopyalaHome.personelList}"
							rendered="#{not empty taseronPersonelKopyalaHome.personelList}" rowKeyVar="row" id="personelTable">
							<f:facet name="header">
								<h:outputText value="Personeller" />
							</f:facet>

							<rich:column>
								<f:facet name="header">
									<h:outputText value="#{ortakIslemler.personelNoAciklama()}" />
								</f:facet>
								<h:outputText value="#{personel.pdksPersonel.pdksSicilNo}" />
							</rich:column>
							<rich:column>
								<f:facet name="header">
									<h:outputText value="Personel Adı Soyadı" />
								</f:facet>
								<h:outputText value="#{personel.pdksPersonel.adSoyad}" />
							</rich:column>

							<rich:column>
								<f:facet name="header">
									<h:outputText value="#{ortakIslemler.kimlikNoAciklama()}" />
								</f:facet>
								<h:outputText value="#{personel.pdksPersonelAciklama}" />
							</rich:column>
							<rich:column>
								<f:facet name="header">
									<h:outputText value="Yeni #{ortakIslemler.personelNoAciklama()}" />
								</f:facet>
								<h:outputText value="#{personel.kgsSicilNo}" />
							</rich:column>
							<rich:column>
								<f:facet name="header">
									<h:outputText value="Yeni Personel Adı Soyadı" />
								</f:facet>
								<ui:fragment rendered="#{personel.personelKGS!=null}">
									<h:outputText value="#{personel.personelKGS.adSoyad}" />
								</ui:fragment>
							</rich:column>
						</rich:dataTable>
					</ui:fragment>
				</a4j:outputPanel>
			</rich:panel>

		</h:form>
	</ui:define>
</ui:composition>
