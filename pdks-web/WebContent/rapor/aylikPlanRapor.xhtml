<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:s="http://jboss.com/products/seam/taglib" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j" template="/layout/template.xhtml">
	<ui:define name="title">
		<h:outputText value="#{ortakIslemler.getMenuAdi('aylikPlanRapor')}" />
	</ui:define>
	<ui:define name="body">

		<h:form id="planForm">

			<a4j:region>
				<rich:panel style="vardiyaGun" header="#{vardiyaGunHome.gorevYeri.aciklama} #{ortakIslemler.getMenuAdi('aylikPlanRapor')}">

					<h:panelGrid columns="2" id="girisler">
						<s:decorate template="/layout/edit.xhtml" rendered="#{authenticatedUser.admin and not empty vardiyaGunHome.departmanList}">
							<ui:define name="label">PDKS Departman</ui:define>
							<h:selectOneMenu value="#{vardiyaGunHome.departmanId}" required="true" requiredMessage="PDKS Departman seçiniz">
								<f:selectItem itemLabel="Lütfen seçiniz" />
								<f:selectItems value="#{vardiyaGunHome.departmanList}" />
								<a4j:support event="onchange" action="#{vardiyaGunHome.fillSirketList()}" ajaxSingle="true" reRender="girisler" />
							</h:selectOneMenu>


						</s:decorate>
						<a4j:outputPanel columns="1" rendered="#{authenticatedUser.admin or authenticatedUser.IK}">
							<s:decorate template="/layout/edit.xhtml" rendered="#{not empty vardiyaGunHome.sirketList}">
								<ui:define name="label">#{ortakIslemler.sirketAciklama()}</ui:define>
								<h:selectOneMenu value="#{vardiyaGunHome.sirketId}">
									<f:selectItem itemLabel="Lütfen seçiniz" />
									<f:selectItems value="#{vardiyaGunHome.sirketList}" />
								</h:selectOneMenu>
							</s:decorate>
						</a4j:outputPanel>

						<s:decorate template="/layout/edit.xhtml">
							<ui:define name="label">Yıl</ui:define>
							<rich:inputNumberSpinner styleClass="size10" inputStyle="width:20px" minValue="#{ortakIslemler.getParameterKey('sistemBaslangicYili')}" maxValue="#{vardiyaGunHome.maxYil}" inputSize="1"
								value="#{vardiyaGunHome.yil}">
								<a4j:support event="onchange" action="#{vardiyaGunHome.aylikPuantajList.clear()}" ajaxSingle="true" reRender="vardiyaPanel" />
							</rich:inputNumberSpinner>
						</s:decorate>
						<s:decorate template="/layout/edit.xhtml">
							<ui:define name="label">Ay</ui:define>
							<h:selectOneMenu id="basAy" value="#{vardiyaGunHome.ay}" required="true" requiredMessage="Başlangıç ay seçiniz">
								<f:selectItem itemLabel="Lütfen seçiniz" />
								<f:selectItems value="#{vardiyaGunHome.aylar}" />
								<a4j:support event="onchange" status="ajaxStatus" action="#{vardiyaGunHome.aylikPuantajList.clear()}" ajaxSingle="true"
									reRender="vardiyaPanel,girisler" />
							</h:selectOneMenu>
						</s:decorate>
 

						<s:decorate template="/layout/edit.xhtml"
							rendered="#{(authenticatedUser.admin or authenticatedUser.IKAdmin) and vardiyaGunHome.ekSahaTanimMap.ekSaha1!=null}">
							<ui:define name="label">#{vardiyaGunHome.ekSaha1.aciklama}</ui:define>
							<h:selectOneMenu value="#{vardiyaGunHome.seciliEkSaha1Id}" required="#{authenticatedUser.IK or authenticatedUser.admin }"
								requiredMessage="#{vardiyaGunHome.ekSaha1.aciklama} giriniz!">
								<f:selectItem itemLabel="Lütfen seçiniz" />
								<f:selectItems value="#{vardiyaGunHome.getSelectEkSahaList('ekSaha1')}" />
							</h:selectOneMenu>
						</s:decorate>

						<s:decorate template="/layout/edit.xhtml" rendered="#{vardiyaGunHome.gorevYeriList!=null }">
							<ui:define name="label">#{vardiyaGunHome.ekSaha3.aciklama}</ui:define>
							<h:selectOneMenu value="#{vardiyaGunHome.seciliEkSaha3Id}">
								<f:selectItem itemLabel="Lütfen seçiniz" />
								<f:selectItems value="#{vardiyaGunHome.gorevYeriList}" />
								<a4j:support event="onchange" status="ajaxStatus" action="#{vardiyaGunHome.aylikPuantajList.clear()}" ajaxSingle="true"
									reRender="vardiyaPanel,girisler" />
							</h:selectOneMenu>
						</s:decorate>
						<s:decorate template="/layout/edit.xhtml" rendered="#{authenticatedUser.admin or authenticatedUser.IK}">
							<ui:define name="label">#{ortakIslemler.personelNoAciklama()}</ui:define>
							<h:inputText value="#{vardiyaGunHome.sicilNo}" maxlength="11" />
						</s:decorate>




					</h:panelGrid>
					<a4j:commandButton value="Aylık Plan Getir" action="#{vardiyaGunHome.fillAylikPlanRaporList}" onclick="#{rich:component('wait')}.show()"
						oncomplete="if (#{facesContext.maximumSeverity==null}) #{rich:component('wait')}.hide()" reRender="vardiyaPanel,bitTarih,girisler,ozelIstekSec" />

				</rich:panel>
			</a4j:region>
			<a4j:outputPanel id="vardiyaPanel">

				<rich:panel styleClass="vardiyaGun">
					<ui:include src="/puantaj/includes/aylikPlani.xhtml" />

				</rich:panel>
			</a4j:outputPanel>

		</h:form>

	</ui:define>

</ui:composition>
