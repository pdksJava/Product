
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:s="http://jboss.com/products/seam/taglib" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j" xmlns:t="http://myfaces.apache.org/tomahawk" xmlns:p="http://primefaces.prime.com.tr/ui"
	xmlns:c="http://java.sun.com/jstl/core" template="/layout/template.xhtml">
	<ui:define name="title">
		<h:outputText value="#{ortakIslemler.getMenuAdi('vardiyaPlani')}" />
	</ui:define>
	<ui:define name="body">

		<h:form id="planForm">


			<rich:panel style="vardiyaGun" header="#{ortakIslemler.getMenuUserAdi(vardiyaGunHome.session,'vardiyaPlani')}">
				<a4j:outputPanel ajaxRendered="true">
					<h:messages id="messages" styleClass="message" errorClass="errormsg" infoClass="infomsg" warnClass="warnmsg" />
				</a4j:outputPanel>
				<a4j:outputPanel id="girisler">
					<h:panelGrid columns="2">

						<s:decorate template="/layout/edit.xhtml">
							<ui:define name="label">Yıl</ui:define>
							<rich:inputNumberSpinner styleClass="size10" inputStyle="width:20px" minValue="#{ortakIslemler.getParameterKey('sistemBaslangicYili')}"
								maxValue="#{vardiyaGunHome.maxYil}" inputSize="1" value="#{vardiyaGunHome.yil}">
								<a4j:support event="onchange" action="#{vardiyaGunHome.yilAyDegisti(true)}" ajaxSingle="true" reRender="vardiyaPanel,girisler" />
							</rich:inputNumberSpinner>
						</s:decorate>
						<s:decorate template="/layout/edit.xhtml">
							<ui:define name="label">Ay</ui:define>
							<h:selectOneMenu id="basAy" value="#{vardiyaGunHome.ay}" required="true" requiredMessage="Başlangıç ay seçiniz">
								<f:selectItem itemLabel="Lütfen seçiniz" />
								<f:selectItems value="#{vardiyaGunHome.aylar}" />
								<a4j:support event="onchange" status="ajaxStatus" action="#{vardiyaGunHome.yilAyDegisti(false)}" ajaxSingle="true"
									reRender="vardiyaPanel,girisler" />
							</h:selectOneMenu>
						</s:decorate>
						<s:decorate template="/layout/edit.xhtml" rendered="#{vardiyaGunHome.adminRole  and vardiyaGunHome.aramaSecenekleri.departmanIdList.size()>1}">
							<ui:define name="label">PDKS Departman</ui:define>
							<h:selectOneMenu value="#{vardiyaGunHome.aramaSecenekleri.departmanId}" required="true" requiredMessage="PDKS Departman seçiniz">
								<f:selectItem itemLabel="Lütfen seçiniz" />
								<f:selectItems value="#{vardiyaGunHome.aramaSecenekleri.departmanIdList}" />
								<a4j:support event="onchange" action="#{vardiyaGunHome.fillSirketList()}" ajaxSingle="true" reRender="girisler,vardiyaPanel" />
							</h:selectOneMenu>


						</s:decorate>
						<s:decorate template="/layout/edit.xhtml" rendered="#{vardiyaGunHome.aramaSecenekleri.sirketIdList.size()>0}">
							<ui:define name="label">#{ortakIslemler.sirketAciklama()}</ui:define>
							<h:selectOneMenu value="#{vardiyaGunHome.aramaSecenekleri.sirketId}" disabled="#{vardiyaGunHome.aramaSecenekleri.sirketIdList.size()==1}"
								required="true" requiredMessage="#{ortakIslemler.sirketAciklama()} seçiniz">
								<f:selectItem itemLabel="Lütfen seçiniz" />
								<f:selectItems value="#{vardiyaGunHome.aramaSecenekleri.sirketIdList}" />
								<a4j:support event="onchange" action="#{vardiyaGunHome.tesisDoldur(true)}" ajaxSingle="true" reRender="vardiyaPanel,girisler" />
							</h:selectOneMenu>
						</s:decorate>

						<s:decorate template="/layout/edit.xhtml"
							rendered="#{vardiyaGunHome.aramaSecenekleri.tesisList!=null and vardiyaGunHome.aramaSecenekleri.tesisList.size()>0}">
							<ui:define name="label">#{ortakIslemler.tesisAciklama()}</ui:define>
							<h:selectOneMenu value="#{vardiyaGunHome.aramaSecenekleri.tesisId}" requiredMessage="#{ortakIslemler.tesisAciklama()} seçiniz!" required="true"
								disabled="#{vardiyaGunHome.aramaSecenekleri.tesisList.size()==1}">
								<f:selectItem itemLabel="Lütfen seçiniz" />
								<f:selectItems value="#{vardiyaGunHome.aramaSecenekleri.tesisList}" />
								<a4j:support event="onchange" status="ajaxStatus" action="#{vardiyaGunHome.bolumDoldur()}" ajaxSingle="true" reRender="vardiyaPanel,girisler" />
							</h:selectOneMenu>
						</s:decorate>
						<s:decorate template="/layout/edit.xhtml"
							rendered="#{vardiyaGunHome.aramaSecenekleri.gorevYeriList!=null and vardiyaGunHome.aramaSecenekleri.gorevYeriList.size()>0}">
							<ui:define name="label">#{vardiyaGunHome.bolumAciklama}</ui:define>
							<h:selectOneMenu value="#{vardiyaGunHome.aramaSecenekleri.ekSaha3Id}" disabled="#{vardiyaGunHome.aramaSecenekleri.gorevYeriList.size()==1}"
								requiredMessage="#{vardiyaGunHome.bolumAciklama} seçiniz!" required="#{vardiyaGunHome.aramaSecenekleri.gorevYeriList.size()>1}">
								<f:selectItem itemLabel="Lütfen seçiniz" />
								<f:selectItems value="#{vardiyaGunHome.aramaSecenekleri.gorevYeriList}" />
								<a4j:support event="onchange" status="ajaxStatus" action="#{vardiyaGunHome.aylikPuantajList.clear()}" ajaxSingle="true"
									reRender="vardiyaPanel,girisler" />
							</h:selectOneMenu>
						</s:decorate>

						<s:decorate template="/layout/edit.xhtml" rendered="#{vardiyaGunHome.kullaniciPersonel==false}">
							<ui:define name="label">#{ortakIslemler.personelNoAciklama()}</ui:define>
							<h:inputText value="#{vardiyaGunHome.sicilNo}">
								<a4j:support event="onchange" status="ajaxStatus" action="#{vardiyaGunHome.aylikPuantajList.clear()}" ajaxSingle="true" reRender="girisler" />
							</h:inputText>
						</s:decorate>
						<s:decorate template="/layout/edit.xhtml" rendered="#{ not empty vardiyaGunHome.aylikPuantajList and vardiyaGunHome.sutIzniGoster}">
							<ui:define name="label">Süt İzni Süresi</ui:define>
							<h:outputText value="#{authenticatedUser.sayiFormatliGoster(vardiyaGunHome.denklestirmeAy.toplamIzinSure)}" />
						</s:decorate>
						<s:decorate id="ozelIstekSec" template="/layout/edit.xhtml"
							rendered="#{ not empty vardiyaGunHome.aylikPuantajList and vardiyaGunHome.aramaSecenekleri.sirket.erp and ortakIslemler.getParameterKey('uygulamaTipi')=='H'}">
							<ui:define name="label">Özel Durum</ui:define>
							<h:selectBooleanCheckbox value="#{vardiyaGunHome.ozelIstek}">
								<a4j:support event="onclick" status="ajaxStatus" ajaxSingle="true" reRender="ozelIstekSec" />
							</h:selectBooleanCheckbox>
						</s:decorate>


					</h:panelGrid>
					<a4j:commandButton value="Aylık Plan Getir" action="#{vardiyaGunHome.fillAylikVardiyaPlanList}" onclick="#{rich:component('wait')}.show()"
						rendered="#{not empty vardiyaGunHome.aramaSecenekleri.gorevYeriList}"
						oncomplete="if (#{facesContext.maximumSeverity==null}) #{rich:component('wait')}.hide()" reRender="vardiyaPanel,girisler,ozelIstekSec" />
					<a4j:commandButton value="Aylık Hareket Kayıtları Düzenle" action="#{vardiyaGunHome.aylikHareketKaydiVardiyaBulGuncelle}"
						onclick="#{rich:component('wait')}.show()" rendered="#{vardiyaGunHome.aylikHareketKaydiVardiyaBul}"
						oncomplete="if (#{facesContext.maximumSeverity==null}) #{rich:component('wait')}.hide()" reRender="girisler" />

					<a4j:commandButton value="Excel'den Plan Güncelle" onclick="#{rich:component('wait')}.show()" action="#{vardiyaGunHome.fileImportDosyaSifirla()}"
						ajaxSingle="true"
						oncomplete="if (#{facesContext.maximumSeverity==null}) #{rich:component('wait')}.hide();#{rich:component('fileImportPanel')}.show()"
						rendered="#{  vardiyaGunHome.fileImport}" reRender="fileImportPanel" />

					<ui:fragment rendered="#{vardiyaGunHome.donusAdres!=''}">
						<br />
						<f:verbatim>#{vardiyaGunHome.donusAdres}</f:verbatim>
					</ui:fragment>
				</a4j:outputPanel>
			</rich:panel>


			<a4j:outputPanel id="vardiyaPanel">

				<rich:panel styleClass="vardiyaGun">

					<ui:include src="/puantaj/includes/aylikPlani.xhtml" />

				</rich:panel>
			</a4j:outputPanel>
		</h:form>

		<rich:modalPanel id="fileImportPanel" autosized="true" width="900" top="30">
			<f:facet name="header">
				<h:outputText value="Excel'den Çalışma Planı Güncelleme" />
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:form>
						<h:graphicImage value="/img/close.png" id="hidelink" styleClass="hidelink">
							<a4j:support event="onclick" onclick="#{rich:component('wait')}.show()"
								oncomplete="if (#{facesContext.maximumSeverity==null}) { #{rich:component('fileImportPanel')}.hide();#{rich:component('wait')}.hide();}" />
						</h:graphicImage>
					</h:form>
				</h:panelGroup>
			</f:facet>

			<h:form>

				<rich:panel header="Çalışma Planı Güncelleme">
					<a4j:outputPanel id="dosyaPaneli">

						<h:panelGrid columns="2" style="width:700px;">

							<rich:fileUpload id="fileUpload" fileUploadListener="#{vardiyaGunHome.listenerFileImportDosya}" listHeight="50px" listWidth="300px"
								sizeErrorLabel="Dosya boyutu büyük" maxFilesQuantity="1" immediateUpload="true" acceptedTypes="xls,xlsx"
								transferErrorLabel="Vardiya planı dosyası hatalı yüklenmiştir" doneLabel="Bitti" addControlLabel="Dosya Seçin (Excel)"
								uploadControlLabel="Dosya Kaydet" cancelEntryControlLabel="Temizle" allowFlash="false">
								<a4j:support event="onuploadcomplete" process="fileUpload" ajaxSingle="true" reRender="dosyaPaneli" />
							</rich:fileUpload>
							<ui:fragment rendered="#{vardiyaGunHome.vardiyaPlanDosya.dosyaIcerik!=null}">
								<h:panelGrid columns="3">
									<a4j:commandButton image="/img/delete.gif" title="Dosya Yeniden Yükle" status="ajaxStatus" reRender="dosyaPaneli" ajaxSingle="true"
										action="#{vardiyaGunHome.fileImportDosyaSifirla}" />
									<h:outputText value="#{vardiyaGunHome.vardiyaPlanDosya.dosyaAdi}" />
								</h:panelGrid>

								<a4j:commandButton id="dosyaOku" value="Dosya Oku" status="ajaxStatus" action="#{vardiyaGunHome.vardiyaPlanDosyaOku}"
									rendered="#{vardiyaGunHome.aylikPuantajDosyaList.isEmpty()}" reRender="dosyaPaneli"></a4j:commandButton>
								<a4j:commandButton value="Dosya Aktar" status="ajaxStatus" action="#{vardiyaGunHome.vardiyaPlanDosyaYaz}" reRender="dosyaPaneli,vardiyaPanel"
									rendered="#{not empty vardiyaGunHome.aylikPuantajDosyaList and vardiyaGunHome.degisti}" />

								<rich:toolTip for="dosyaOku" rendered="#{vardiyaGunHome.aylikPuantajDosyaList.isEmpty()}">

								</rich:toolTip>
							</ui:fragment>


						</h:panelGrid>

						<a4j:outputPanel id="hareketTables" rendered="#{not empty vardiyaGunHome.aylikPuantajDosyaList}">
							<DIV class="#{authenticatedUser.scroolClass}" id="#{authenticatedUser.scroolDiv}">
								<table class="mars" cellpadding="1" cellspacing="1">
									<thead>
										<tr>
											<ui:fragment rendered="#{ vardiyaGunHome.degisti}">
												<th style="width: 30px"><h:outputText value="Seçim" /> <br></br> <h:selectBooleanCheckbox value="#{vardiyaGunHome.onayDurum}">
														<a4j:support event="onclick" status="ajaxStatus" action="#{vardiyaGunHome.durumDegistir}" reRender="hareketTables" />

													</h:selectBooleanCheckbox></th>
											</ui:fragment>
											<th style="width: 30px"><h:outputText value="#{ortakIslemler.personelNoAciklama()}" /></th>
											<th><h:outputText value="Adı Soyadı" /></th>
											<th style="width: 60px"><h:outputText value="#{ortakIslemler.yoneticiAciklama()}" /></th>
											<ui:repeat value="#{vardiyaGunHome.aylikPuantajDefault.ayinVardiyalari}" var="vardiya">

												<ui:fragment rendered="#{vardiya.tatil==null}">
													<th style="width: 20px"><h:outputText value="#{authenticatedUser.getTarihFormatla(vardiya.vardiyaDate, 'd')}" /><bR /> <h:outputText
															value="#{authenticatedUser.getTarihFormatla(vardiya.vardiyaDate, 'EEE')}" /> <ui:fragment
															rendered="#{vardiyaGunHome.denklestirmeAyDurum and vardiyaGunHome.planGirisi and authenticatedUser.departman.admin}">
															<bR />

															<h:selectBooleanCheckbox value="#{vardiya.checkBoxDurum}" action="#{vardiyaGunHome.bosIslem()}" status="ajaxStatus" />
														</ui:fragment></th>
												</ui:fragment>

												<ui:fragment rendered="#{vardiya.tatil.yarimGun==true}">
													<td class="arife" title="#{vardiya.tatil.ad}"
														style="width: 20px; font-family: Arial, Verdana, sans-serif; font-size: 11px; font-weight: bold; text-align: center;"><h:outputText
															value="#{authenticatedUser.getTarihFormatla(vardiya.vardiyaDate, 'd')}" /><bR /> <h:outputText
															value="#{authenticatedUser.getTarihFormatla(vardiya.vardiyaDate, 'EEE')}" /> <ui:fragment
															rendered="#{vardiyaGunHome.denklestirmeAyDurum and vardiyaGunHome.planGirisi  and authenticatedUser.departman.admin}">
															<bR />
															<h:selectBooleanCheckbox value="#{vardiya.checkBoxDurum}" action="#{vardiyaGunHome.bosIslem()}" status="ajaxStatus" />
														</ui:fragment></td>
												</ui:fragment>
												<ui:fragment rendered="#{vardiya.tatil.yarimGun==false}">
													<td class="bayram" title="#{vardiya.tatil.ad}"
														style="width: 20px; font-family: Arial, Verdana, sans-serif; font-size: 11px; font-weight: bold; text-align: center;"><h:outputText
															value="#{authenticatedUser.getTarihFormatla(vardiya.vardiyaDate, 'd')}" /><bR /> <h:outputText
															value="#{authenticatedUser.getTarihFormatla(vardiya.vardiyaDate, 'EEE')}" /> <ui:fragment
															rendered="#{vardiyaGunHome.denklestirmeAyDurum and vardiyaGunHome.planGirisi  and authenticatedUser.departman.admin}">
															<bR />
															<h:selectBooleanCheckbox value="#{vardiya.checkBoxDurum}" action="#{vardiyaGunHome.bosIslem()}" status="ajaxStatus" />
														</ui:fragment></td>
												</ui:fragment>


											</ui:repeat>
										</tr>
									</thead>
									<tbody>
										<a4j:repeat value="#{vardiyaGunHome.aylikPuantajDosyaList}" var="aylikPuantaj">
											<tr>
												<ui:fragment rendered="#{vardiyaGunHome.degisti}">
													<td class="#{aylikPuantaj.trClass}" style="width: 30px" align="center"><ui:fragment rendered="#{aylikPuantaj.kaydet}">
															<h:selectBooleanCheckbox value="#{aylikPuantaj.secili}" />
														</ui:fragment></td>
												</ui:fragment>
												<td class="#{aylikPuantaj.trClass}" style="width: 30px" align="left"><h:outputText title="#{aylikPuantaj.bolumBordroAltBirim}"
														value="#{aylikPuantaj.pdksPersonel.sicilNo}" /></td>
												<td class="#{aylikPuantaj.trClass}" align="left" width="80px"><h:outputText value="#{aylikPuantaj.pdksPersonel.adSoyad}"
														title="#{aylikPuantaj.pdksPersonel.personelExtraAciklama}" /></td>
												<td class="#{aylikPuantaj.trClass}" style="width: 60px" align="center"><SPAN title="#{aylikPuantaj.pdksPersonel.ekSaha3.aciklama}"><h:outputText
															value="#{aylikPuantaj.pdksPersonel.pdksYonetici.adSoyad}" /></SPAN></td>
												<a4j:repeat value="#{aylikPuantaj.ayinVardiyalari}" var="vardiyaGun">
													<ui:fragment rendered="#{vardiyaGun.ayinGunu}">
														<td align="center" class="#{vardiyaGun.getAylikClassAdi(aylikPuantaj.trClass)}" id="vardiyaDosya#{vardiyaGun.vardiyaKeyStr}"
															style="width: 20px"><ui:fragment id="veri" rendered="#{vardiyaGun.calisan}">
																<ui:fragment rendered="#{vardiyaGun.izin!=null}">
																	<SPAN> <h:outputText value="#{vardiyaGun.vardiya.kisaAdi}" rendered="#{vardiyaGun.vardiya.haftaTatil}" />

																	</SPAN>
																	<ui:fragment rendered="#{vardiyaGun.vardiya.haftaTatil==false}">
																		<SPAN title="#{vardiyaGun.vardiya.kisaAdi}"> <h:outputText value=" #{vardiyaGun.izin.izinTipi.kisaAciklama}" /> <br /> [
																			#{vardiyaGun.vardiya.vardiyaAciklama} ]

																		</SPAN>
																	</ui:fragment>
																</ui:fragment>
																<ui:fragment rendered="#{vardiyaGun.izin==null}">
																	<rich:toolTip for="vardiyaDosya#{vardiyaGun.vardiyaKeyStr}">
																		<SPAN style="font-size: 12px;"> #{authenticatedUser.getTarihFormatla(vardiyaGun.vardiyaDate, 'd MMM')} -->
																			#{vardiyaGun.title}</SPAN>
																	</rich:toolTip>
																	<ui:fragment rendered="#{vardiyaGun.vardiya.idLong==vardiyaGun.yeniVardiya.idLong}">
																		<h:outputText value="#{vardiyaGun.yeniVardiya.kisaAdi}" rendered="#{vardiyaGun.yeniVardiya!=null}" />
																	</ui:fragment>

																	<ui:fragment rendered="#{vardiyaGun.vardiya.idLong!=vardiyaGun.yeniVardiya.idLong}">
																		<B> <h:outputText value="#{vardiyaGun.yeniVardiya.kisaAdi}" rendered="#{vardiyaGun.yeniVardiya!=null}" /></B>
																		<ui:fragment rendered="#{vardiyaGun.yeniVardiya.idLong>0}">
																			<BR></BR>
																		</ui:fragment>
																		<h:graphicImage value="/img/msgwarn.png" style="border:0" id="msgwarn" />
																		<rich:toolTip for="msgwarn" rendered="#{vardiyaGun.vardiya.idLong>0 and vardiyaGun.yeniVardiya.idLong>0}">
																		#{vardiyaGun.vardiya.kisaAdi} --> #{vardiyaGun.yeniVardiya.kisaAdi}
																	</rich:toolTip>

																	</ui:fragment>
																</ui:fragment>
															</ui:fragment></td>

													</ui:fragment>
												</a4j:repeat>
											</tr>
										</a4j:repeat>
									</tbody>
								</table>
							</DIV>
						</a4j:outputPanel>
						<h:messages id="messages" styleClass="message" errorClass="errormsg" infoClass="infomsg" warnClass="warnmsg" />

					</a4j:outputPanel>
				</rich:panel>

			</h:form>
		</rich:modalPanel>

		<rich:modalPanel id="editAylikPanel" autosized="true" width="900" top="30">
			<f:facet name="header">
				<h:outputText
					value="#{vardiyaGunHome.personelAylikPuantaj.pdksPersonel.pdksSicilNo} #{vardiyaGunHome.personelAylikPuantaj.pdksPersonel.adSoyad} Çalışma Planı Güncelleme" />
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:form>
						<h:graphicImage value="/img/close.png" id="hidelink" styleClass="hidelink">
							<a4j:support event="onclick" action="#{vardiyaGunHome.aylikRefresh}" reRender="vardiyaPanel" onclick="#{rich:component('wait')}.show()"
								oncomplete="if (#{facesContext.maximumSeverity==null}) { #{rich:component('editAylikPanel')}.hide();#{rich:component('wait')}.hide();}"
								ajaxSingle="true" />
						</h:graphicImage>
					</h:form>
				</h:panelGroup>
			</f:facet>
			<h:form>
				<a4j:outputPanel ajaxRendered="true">
					<h:messages id="messages" styleClass="message" errorClass="errormsg" infoClass="infomsg" warnClass="warnmsg" />
				</a4j:outputPanel>
				<a4j:outputPanel id="secimler">
					<table class="mars">
						<a4j:repeat value="#{vardiyaGunHome.personelAylikPuantaj.vardiyaPlan.vardiyaHaftaList}" var="vardiyaHafta">
							<ui:fragment rendered="#{vardiyaHafta.hafta==1}">

								<tr>
									<a4j:repeat value="#{vardiyaHafta.vardiyaGunler}" var="vardiyaGun">
										<th><h:outputText value="#{authenticatedUser.getTarihFormatla(vardiyaGun.vardiyaDate, 'EEE')}" /></th>
									</a4j:repeat>
									<ui:fragment rendered="#{vardiyaGunHome.sablonGuncelle}">
										<th width="100px">Vardiya</th>
									</ui:fragment>
								</tr>
							</ui:fragment>
							<tr>
								<a4j:repeat value="#{vardiyaHafta.vardiyaGunler}" var="vardiyaGun">
									<ui:fragment rendered="#{vardiyaGun.tatil==null}">
										<th style="width: 90px"><h:outputText value="#{authenticatedUser.getTarihFormatla(vardiyaGun.vardiyaDate, 'd MMM')}" /></th>
									</ui:fragment>

									<ui:fragment rendered="#{vardiyaGun.tatil.yarimGun==true}">
										<td class="arife" title="#{vardiyaGun.tatil.ad}"
											style="width: 90px; font-family: Arial, Verdana, sans-serif; font-size: 11px; font-weight: bold; text-align: center;"><h:outputText
												value="#{authenticatedUser.getTarihFormatla(vardiyaGun.vardiyaDate, 'd MMM')}" /></td>
									</ui:fragment>
									<ui:fragment rendered="#{vardiyaGun.tatil.yarimGun==false}">
										<td class="bayram" title="#{vardiyaGun.tatil.ad}"
											style="width: 90px; font-family: Arial, Verdana, sans-serif; font-size: 11px; font-weight: bold; text-align: center;"><h:outputText
												value="#{authenticatedUser.getTarihFormatla(vardiyaGun.vardiyaDate, 'd MMM')}" /></td>
									</ui:fragment>


								</a4j:repeat>
								<ui:fragment rendered="#{vardiyaGunHome.sablonGuncelle and vardiyaHafta.hafta==1}">
									<th width="100px">Şablonu</th>
								</ui:fragment>
							</tr>
							<tr>
								<a4j:repeat value="#{vardiyaHafta.vardiyaGunler}" var="vardiyaGun">
									<td style="width: 90px" id="vardiya#{vardiyaGun.vardiyaDateStr}" class="#{vardiyaGun.getAylikClassAdi(aylikPuantaj.trClass)}" align="center">
										<ui:fragment
											rendered="#{vardiyaGun.vardiyalar==null or vardiyaGun.vardiya==null or vardiyaGun.aylikGirisYap==false or  vardiyaGun.izin!=null or vardiyaGun.kullaniciYetkili==false}">
											<h:panelGrid id="veriDigerAy">
												<h:outputText value="#{vardiyaGun.aciklama}" />
											</h:panelGrid>
											<rich:toolTip for="veriDigerAy" rendered="#{vardiyaGun.title!=''}">
												<SPAN style="font-size: 14px; font-weight: bold;"> #{authenticatedUser.getTarihFormatla(vardiyaGun.vardiyaDate, 'd MMM')} -->
													#{vardiyaGun.title}</SPAN>
											</rich:toolTip>
										</ui:fragment> <ui:fragment rendered="#{vardiyaGun.vardiyalar!=null and vardiyaGun.aylikGirisYap==true  and vardiyaGun.kullaniciYetkili}">
											<h:selectOneMenu styleClass="size10" style="width:85px" disabled="#{vardiyaGunHome.personelAylikPuantaj.kaydet==false}"
												value="#{vardiyaGun.vardiya}" required="true" rendered="#{vardiyaGun!=null}"
												requiredMessage="#{vardiyaGun.vardiyaGunAciklama} günü vardiyasını seçiniz">
												<s:selectItems var="comp" value="#{vardiyaGun.vardiyalar}" label="#{comp.kisaAciklama}" noSelectionLabel="Seçiniz" />
												<s:convertEntity />
												<a4j:support event="onchange" ajaxSingle="true" action="#{vardiyaGunHome.vardiyaDegistir(vardiyaGun)}" reRender="secimler" />
											</h:selectOneMenu>
											<rich:toolTip for="vardiya#{vardiyaGun.vardiyaDateStr}">
												<ui:fragment rendered="#{vardiyaGunHome.personelAylikPuantaj.kaydet==false}">
													<h2>#{authenticatedUser.getTarihFormatla(vardiyaGun.vardiyaDate, 'd MMM ')} : #{vardiyaGun.vardiyaPlanAdi}</h2>
												</ui:fragment>
												<ui:fragment rendered="#{vardiyaGunHome.personelAylikPuantaj.kaydet}">
													<DIV>
														<h2>#{authenticatedUser.getTarihFormatla(vardiyaGun.vardiyaDate, 'd MMM yyyy')}</h2>
														<TABLE>
															<a4j:repeat value="#{vardiyaGun.vardiyalar}" var="vt">
																<TR>
																	<TD><ui:fragment rendered="#{vt.id==vardiyaGun.vardiya.id}">
																			<SPAN style="font-size: 14px; font-weight: bold; color: red;">#{vardiyaGun.getVardiyaAdi(vt)}</SPAN>
																		</ui:fragment> <ui:fragment rendered="#{vt.id!=vardiyaGun.vardiya.id}">
																			<SPAN style="font-size: 14px;">#{vardiyaGun.getVardiyaAdi(vt)}</SPAN>
																		</ui:fragment></TD>
																</TR>
															</a4j:repeat>
														</TABLE>
													</DIV>
												</ui:fragment>
											</rich:toolTip>

											<ui:fragment rendered="#{vardiyaGunHome.ozelIstek}">
												<br />
												<B> Özel Durum :</B>
												<h:selectOneMenu style="width:90px" value="#{vardiyaGun.vardiyaGorev.ozelIstekDurum}">
													<f:selectItems value="#{vardiyaGunHome.ozelDurumList}" />
													<a4j:support event="onchange" ajaxSingle="true" reRender="secimler" action="#{vardiyaGunHome.vardiyaDegistir(vardiyaGun)}" />
												</h:selectOneMenu>
											</ui:fragment>
											<ui:fragment
												rendered="#{vardiyaGunHome.ozelIstek==false and vardiyaGunHome.personelAylikPuantaj.gorevYeriSec==false and not empty vardiyaGunHome.bolumKatlari }">
												<br />
												<h:selectOneMenu styleClass="size10" style="width:85px" disabled="#{vardiyaGunHome.personelAylikPuantaj.kaydet==false}"
													value="#{vardiyaGun.vardiyaGorev.bolumKat}" rendered="#{vardiyaGun!=null}">
													<s:selectItems var="comp" value="#{vardiyaGunHome.bolumKatlari}" label="#{comp.aciklama}" noSelectionLabel="Seçiniz" />
													<s:convertEntity />
													<a4j:support event="onchange" ajaxSingle="true" reRender="secimler" action="#{vardiyaGunHome.vardiyaDegistir(vardiyaGun)}" />
												</h:selectOneMenu>
											</ui:fragment>
											<ui:fragment rendered="#{vardiyaGun.ayinGunu and vardiyaGunHome.ozelIstek==false and vardiyaGunHome.personelAylikPuantaj.gorevYeriSec}">
												<br />
												<h:selectOneMenu styleClass="size10" style="width:85px" disabled="#{vardiyaGunHome.personelAylikPuantaj.kaydet==false}"
													value="#{vardiyaGun.vardiyaGorev.yeniGorevYeri}" rendered="#{vardiyaGun!=null}">
													<s:selectItems var="kat" value="#{vardiyaGunHome.gorevYeriTanimList}" label="#{kat.aciklama}" noSelectionLabel="Seçiniz" />
													<s:convertEntity />
													<a4j:support event="onchange" ajaxSingle="true" reRender="secimler" action="#{vardiyaGunHome.vardiyaDegistir(vardiyaGun)}" />
												</h:selectOneMenu>
											</ui:fragment>
										</ui:fragment> <ui:fragment rendered="#{vardiyaGunHome.ozelIstek and ortakIslemler.getParameterKey('shiftSorumlusu')=='1'}">
											<br />
											<P align="left">
												<B> Shift Sorumlusu :</B>
												<h:selectBooleanCheckbox value="#{vardiyaGun.vardiyaGorev.gorevliDurum}">
													<a4j:support event="onclick" reRender="secimler" ajaxSingle="true" action="#{vardiyaGunHome.vardiyaDegistir(vardiyaGun)}" />

												</h:selectBooleanCheckbox>
											</P>
										</ui:fragment>
									</td>

								</a4j:repeat>
								<ui:fragment rendered="#{vardiyaGunHome.sablonGuncelle and authenticatedUser==null}">
									<td align="center" width="100px"><h:panelGrid columns="2" rendered="#{vardiyaHafta.durum}">

											<h:selectOneMenu value="#{vardiyaHafta.vardiyaSablonu}" styleClass="size10" required="true" style="width:85px"
												requiredMessage="Sablon Seciniz">
												<s:selectItems var="comp" value="#{vardiyaGunHome.sablonList}" label="#{comp.adi}" noSelectionLabel="Lutfen Seciniz" />
												<s:convertEntity />
											</h:selectOneMenu>
											<ui:fragment>

												<a4j:commandButton status="ajaxStatus" id="sablonlink" reRender="secimler" action="#{vardiyaGunHome.aylikSablonGuncelle(vardiyaHafta)}"
													image="/img/ok.gif" />
												<rich:toolTip for="sablonlink" value="#{vardiyaHafta.hafta}. hafta şablon güncelle" />
											</ui:fragment>
										</h:panelGrid></td>
								</ui:fragment>
							</tr>
						</a4j:repeat>
					</table>

					<h:panelGrid id="digerIslemler" columns="5" rendered="#{vardiyaGunHome.personelAylikPuantaj.kaydet  }">
						<s:decorate template="/layout/edit.xhtml">
							<ui:define name="label">Çalışma Modeli</ui:define>
							<h:selectOneMenu value="#{vardiyaGunHome.personelDenklestirme.calismaModeliAy}" disabled="#{vardiyaGunHome.denklestirmeAyDurum==false}"
								styleClass="size10" required="true" style="width:85px" requiredMessage="Çalışma Şekli Seciniz">
								<s:selectItems var="comp" value="#{vardiyaGunHome.modelList}" label="#{comp.calismaModeli.aciklama}" noSelectionLabel="Lutfen Seciniz" />
								<s:convertEntity />
								<a4j:support event="onchange" action="#{vardiyaGunHome.modelDegisti()}" reRender="digerIslemler,secimler" />
							</h:selectOneMenu>

						</s:decorate>
						<s:decorate template="/layout/edit.xhtml"
							rendered="#{vardiyaGunHome.personelDenklestirme.calismaModeliAy!=null and vardiyaGunHome.personelDenklestirme.calismaModeliAy.calismaModeli.toplamGunGuncelle}">
							<ui:define name="label">Planlan Süre</ui:define>
							<h:inputText value="#{vardiyaGunHome.personelDenklestirme.planlanSure}" disabled="#{vardiyaGunHome.denklestirmeAyDurum==false}"
								validatorMessage="Hatalı giriş">
								<a4j:support event="onchange" action="#{vardiyaGunHome.personelDenklestirme.setGuncellendi(true)}" />
							</h:inputText>
						</s:decorate>
						<s:decorate template="/layout/edit.xhtml">
							<ui:define name="label">Denk.Var</ui:define>
							<h:selectBooleanCheckbox value="#{vardiyaGunHome.personelDenklestirme.denklestirme}" disabled="#{vardiyaGunHome.denklestirmeAyDurum==false}">
								<a4j:support event="onclick" action="#{vardiyaGunHome.personelDenklestirme.setGuncellendi(true)}" />
							</h:selectBooleanCheckbox>
						</s:decorate>
						<c:if
							test="#{authenticatedUser.IK and (vardiyaGunHome.personelDenklestirme.fazlaMesaiIzinKullan or  vardiyaGunHome.personelDenklestirme.personel.fazlaMesaiIzinKullan)}">
							<s:decorate template="/layout/edit.xhtml">
								<ui:define name="label">Fazla Mesai İzin Kullandır</ui:define>
								<h:selectBooleanCheckbox value="#{vardiyaGunHome.personelDenklestirme.fazlaMesaiIzinKullan}"
									disabled="#{vardiyaGunHome.denklestirmeAyDurum==false}">
									<a4j:support event="onclick" action="#{vardiyaGunHome.personelDenklestirme.setGuncellendi(true)}" ajaxSingle="true" reRender="secimler" />
								</h:selectBooleanCheckbox>
							</s:decorate>
							<s:decorate template="/layout/edit.xhtml"
								rendered="#{vardiyaGunHome.personelDenklestirme.kismiOdemeSure>0 or ortakIslemler.getParameterKey('kismiOdemeSureGuncelle')=='1'}">
								<ui:define name="label">Kısmi Ödenecek Süre</ui:define>
								<h:inputText value="#{vardiyaGunHome.personelDenklestirme.kismiOdemeSure}" disabled="#{vardiyaGunHome.denklestirmeAyDurum==false}"
									validatorMessage="Hatalı giriş">
									<f:validateDoubleRange minimum="0" maximum="744" />
									<a4j:support event="onchange" action="#{vardiyaGunHome.personelDenklestirme.setGuncellendi(true)}" />
								</h:inputText>
							</s:decorate>
						</c:if>
						<s:decorate template="/layout/edit.xhtml" rendered="#{authenticatedUser.IK and vardiyaGunHome.personelDenklestirme.fazlaMesaiIzinKullan==false}">
							<ui:define name="label">Fazla Mesai Öde</ui:define>
							<h:selectBooleanCheckbox value="#{vardiyaGunHome.personelDenklestirme.fazlaMesaiOde}" disabled="#{vardiyaGunHome.denklestirmeAyDurum==false}">
								<a4j:support event="onclick" action="#{vardiyaGunHome.personelDenklestirme.setGuncellendi(true)}" />
							</h:selectBooleanCheckbox>
						</s:decorate>
						<c:forEach items="#{vardiyaGunHome.personelDenklestirmeDinamikAlanList}" var="pdda">
							<s:decorate template="/layout/edit.xhtml">
								<ui:define name="label">#{pdda.alan.aciklama}</ui:define>
								<h:selectBooleanCheckbox value="#{pdda.durum}" disabled="#{vardiyaGunHome.denklestirmeAyDurum==false}">
									<a4j:support event="onclick" />
								</h:selectBooleanCheckbox>
							</s:decorate>

						</c:forEach>
						<s:decorate template="/layout/edit.xhtml"
							rendered="#{ vardiyaGunHome.personelDenklestirme.egitimSuresiAksamGunSayisi>0 or  vardiyaGunHome.personelDenklestirme.personel.egitimDonemi}">
							<ui:define name="label">
								<SPAN title="Eğitim Ödeneği Akşam Çalışması Maksimum Gün Sayısı">Eğitim Akşam Gün</SPAN>
							</ui:define>
							<rich:inputNumberSpinner styleClass="size10" inputStyle="width:20px" minValue="-1" maxValue="22" inputSize="1"
								value="#{vardiyaGunHome.personelDenklestirme.egitimSuresiAksamGunSayisi}">
								<a4j:support event="onchange" action="#{vardiyaGunHome.personelDenklestirme.setGuncellendi(true)}" />
							</rich:inputNumberSpinner>

						</s:decorate>
						<ui:fragment rendered="#{ vardiyaGunHome.gebeSutIzniGuncelle}">
							<c:choose>
								<c:when test="#{ vardiyaGunHome.personelDenklestirme.sutIzniDurum or  vardiyaGunHome.personelDenklestirme.personel.sutIzniKullan}">
									<s:decorate template="/layout/edit.xhtml">
										<ui:define name="label">Süt İzni Kullanıyor</ui:define>
										<h:selectBooleanCheckbox value="#{vardiyaGunHome.personelDenklestirme.sutIzniDurum}">
											<a4j:support event="onclick" action="#{vardiyaGunHome.personelDenklestirme.setGuncellendi(true)}" />
										</h:selectBooleanCheckbox>
									</s:decorate>
									<s:decorate template="/layout/edit.xhtml">
										<ui:define name="label">Süt İzni ÇGS (#{authenticatedUser.sayiFormatliGoster(vardiyaGunHome.personelDenklestirme.denklestirmeAy.toplamIzinSure)}-#{authenticatedUser.sayiFormatliGoster(vardiyaGunHome.personelDenklestirme.denklestirmeAy.sure)})</ui:define>
										<h:inputText value="#{vardiyaGunHome.personelDenklestirme.sutIzniSaatSayisi}" validatorMessage="Hatalı giriş">
											<a4j:support event="onchange" action="#{vardiyaGunHome.personelDenklestirme.setGuncellendi(true)}" />
										</h:inputText>
									</s:decorate>
								</c:when>
								<c:otherwise>
									<s:decorate template="/layout/edit.xhtml">
										<ui:define name="label">Gebe ÇGS</ui:define>
										<h:inputText value="#{vardiyaGunHome.personelDenklestirme.sutIzniSaatSayisi}" validatorMessage="Hatalı giriş">
											<a4j:support event="onchange" action="#{vardiyaGunHome.personelDenklestirme.setGuncellendi(true)}" />
										</h:inputText>
									</s:decorate>
								</c:otherwise>
							</c:choose>

						</ui:fragment>
						<ui:fragment rendered="#{ vardiyaGunHome.personelDenklestirme.partTime or  vardiyaGunHome.personelDenklestirme.personel.partTimeCalisan}">
							<s:decorate template="/layout/edit.xhtml">
								<ui:define name="label">Part Time</ui:define>
								<h:selectBooleanCheckbox value="#{vardiyaGunHome.personelDenklestirme.partTime}">
									<a4j:support event="onclick" action="#{vardiyaGunHome.personelDenklestirme.setGuncellendi(true)}" />
								</h:selectBooleanCheckbox>
							</s:decorate>

						</ui:fragment>
						<s:decorate template="/layout/edit.xhtml"
							rendered="#{vardiyaGunHome.personelAylikPuantaj.gorevYeriSec==false and (vardiyaGunHome.personelAylikPuantaj.vardiyaSua or vardiyaGunHome.personelDenklestirme.suaDurum!=null)}">
							<ui:define name="label">Şu Var</ui:define>
							<h:selectBooleanCheckbox value="#{vardiyaGunHome.personelDenklestirme.suaDurum}">
								<a4j:support event="onclick" action="#{vardiyaGunHome.personelDenklestirme.setGuncellendi(true)}" />
							</h:selectBooleanCheckbox>
						</s:decorate>

					</h:panelGrid>
				</a4j:outputPanel>
				<a4j:commandButton value="Kaydet" action="#{vardiyaGunHome.aylikKaydet}" reRender="vardiyaPanel" onclick="#{rich:component('wait')}.show()"
					oncomplete="if (#{facesContext.maximumSeverity==null}) { #{rich:component('editAylikPanel')}.hide();}#{rich:component('wait')}.hide();" />
			</h:form>
		</rich:modalPanel>
		<rich:modalPanel id="fmtDetayPanel" autosized="true" width="900" top="30">
			<f:facet name="header">
				<h:outputText
					value="#{authenticatedUser.getTarihFormatla(vardiyaGunHome.seciliVardiyaGun.vardiyaDate, 'd MMM yyyy')} #{vardiyaGunHome.seciliVardiyaGun.title}  Fazla Çalışma Talep" />
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:form>
						<h:graphicImage value="/img/close.png" id="hideGunlink" styleClass="hidelink">
							<a4j:support event="onclick" onclick="#{rich:component('wait')}.show()"
								oncomplete="if (#{facesContext.maximumSeverity==null}) { #{rich:component('fmtDetayPanel')}.hide();#{rich:component('wait')}.hide();}"
								ajaxSingle="true" />
						</h:graphicImage>
					</h:form>
				</h:panelGroup>
			</f:facet>
			<h:form>
				<a4j:outputPanel ajaxRendered="true">
					<h:messages id="messages" styleClass="message" errorClass="errormsg" infoClass="infomsg" warnClass="warnmsg" />
				</a4j:outputPanel>
				<a4j:outputPanel id="secimlerGunMesai">
					<rich:dataTable rowClasses="acik,koyu" value="#{vardiyaGunHome.fazlaMesaiTalepler}" var="fmt" rows="50" rowKeyVar="row" id="fmtTable"
						rendered="#{vardiyaGunHome.fazlaMesaiTalepler!=null}">
						<f:facet name="header">
							<h:outputText
								value="#{vardiyaGunHome.seciliVardiyaGun.personel.pdksSicilNo} - #{vardiyaGunHome.seciliVardiyaGun.personel.adSoyad} Fazla Çalışma Talep Formları" />
						</f:facet>

						<rich:column style="text-align:center;">
							<f:facet name="header">
								<h:outputText value="Mesai Başlangıç Zamanı" />
							</f:facet>
							<h:outputText value="#{authenticatedUser.dateTimeFormatla(fmt.baslangicZamani)}" />
						</rich:column>
						<rich:column style="text-align:center;">
							<f:facet name="header">
								<h:outputText value="Mesai Bitiş Zamanı" />
							</f:facet>
							<h:outputText value="#{authenticatedUser.dateTimeFormatla(fmt.bitisZamani)}" />
						</rich:column>
						<rich:column style="text-align:center;">
							<f:facet name="header">
								<h:outputText value="Mesai Süresi (Saat)" />
							</f:facet>
							<h:outputText value="#{authenticatedUser.sayiFormatliGoster(fmt.mesaiSuresi)}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="Mesai Nedeni" />
							</f:facet>
							<h:outputText value="#{fmt.mesaiNeden.aciklama}" id="mnd" />
							<ui:fragment rendered="#{fmt.aciklama!=null and fmt.aciklama!='' }">
								<rich:toolTip for="mnd" value="Açıklama : #{fmt.aciklama}" />
							</ui:fragment>
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="Onay Durum" />
							</f:facet>
							<h:outputText value="#{fmt.onayDurumAciklama}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="Onay'a Gönderen" />
							</f:facet>
							<h:outputText value="#{fmt.olusturanUser.adSoyad}" />
						</rich:column>
						<rich:column style="text-align:center;">
							<f:facet name="header">
								<h:outputText value="Onay'a Gönderme Zamanı" />
							</f:facet>
							<h:outputText value="#{authenticatedUser.dateTimeFormatla(fmt.olusturmaTarihi)}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="Onaylayan" />
							</f:facet>
							<h:outputText value="#{fmt.guncelleyenUser.adSoyad}" />
						</rich:column>
						<rich:column style="text-align:center;">
							<f:facet name="header">
								<h:outputText value="Onaylama Zamanı" />
							</f:facet>
							<h:outputText value="#{authenticatedUser.dateTimeFormatla(fmt.guncellemeTarihi)}" />
						</rich:column>
					</rich:dataTable>

				</a4j:outputPanel>

			</h:form>
		</rich:modalPanel>


		<rich:modalPanel id="topluMesaiTalepPanel" autosized="true" width="900" top="30">
			<f:facet name="header">
				<h:outputText
					value="#{authenticatedUser.getTarihFormatla(vardiyaGunHome.seciliVardiyaGun.vardiyaDate, 'd MMMMM yyyy EEEEE')}  Fazla Çalışma Talep" />
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:form>
						<h:graphicImage value="/img/close.png" id="hidelink" styleClass="hidelink">
							<a4j:support event="onclick" action="#{vardiyaGunHome.aylikRefresh}" reRender="vardiyaPanel" onclick="#{rich:component('wait')}.show()"
								oncomplete="if (#{facesContext.maximumSeverity==null}) { #{rich:component('topluMesaiTalepPanel')}.hide();#{rich:component('wait')}.hide();}"
								ajaxSingle="true" />
						</h:graphicImage>
					</h:form>
				</h:panelGroup>
			</f:facet>
			<h:form>
				<a4j:outputPanel ajaxRendered="true">
					<h:messages id="messages" styleClass="message" errorClass="errormsg" infoClass="infomsg" warnClass="warnmsg" />
				</a4j:outputPanel>
				<a4j:outputPanel id="secimlerTopluMesai">
					<ui:fragment rendered="#{vardiyaGunHome.denklestirmeAyDurum and vardiyaGunHome.fazlaMesaiTalep!=null}">
						<TABLE>
							<TR>
								<TD valign="top" width="%60"><h:panelGrid columns="1">
										<s:decorate template="/layout/edit.xhtml">
											<ui:define name="label">Mesai Başlangıç Zamanı</ui:define>

											<TABLE width="250px">
												<TR>
													<td width="49%" valign="top"><rich:calendar datePattern="#{authenticatedUser.dateFormat}"
															value="#{vardiyaGunHome.fazlaMesaiTalep.baslangicZamani}" showWeekDaysBar="false" showWeeksBar="false">
															<a4j:support event="onchanged" ajaxSingle="true" status="ajaxStatus" action="#{vardiyaGunHome.mesaiSureHesapla()}"
																reRender="secimlerTopluMesai,secimler" />
														</rich:calendar></td>

													<TD width="25%" valign="top"><rich:inputNumberSpinner minValue="0" maxValue="23" inputSize="2"
															value="#{vardiyaGunHome.fazlaMesaiTalep.basSaat}">
															<a4j:support event="onchange" ajaxSingle="true" status="ajaxStatus" action="#{vardiyaGunHome.mesaiSureHesapla()}"
																reRender="secimlerTopluMesai" />
														</rich:inputNumberSpinner></TD>
													<TD width="1%" valign="top">:</TD>
													<TD width="25%" valign="top"><rich:inputNumberSpinner minValue="0" maxValue="59" inputSize="2" step="5"
															value="#{vardiyaGunHome.fazlaMesaiTalep.basDakika}">
															<a4j:support event="onchange" ajaxSingle="true" status="ajaxStatus" action="#{vardiyaGunHome.mesaiSureHesapla()}"
																reRender="secimlerTopluMesai" />
														</rich:inputNumberSpinner></TD>
												</TR>
											</TABLE>

										</s:decorate>
										<s:decorate template="/layout/edit.xhtml">
											<ui:define name="label">Mesai Bitiş Zamanı</ui:define>

											<TABLE width="250px">
												<TR>
													<TD width="49%" valign="top"><rich:calendar datePattern="#{authenticatedUser.dateFormat}"
															value="#{vardiyaGunHome.fazlaMesaiTalep.bitisZamani}" showWeekDaysBar="false" showWeeksBar="false">
															<a4j:support event="onchanged" ajaxSingle="true" status="ajaxStatus" action="#{vardiyaGunHome.mesaiSureHesapla()}"
																reRender="secimlerTopluMesai" />
														</rich:calendar></TD>

													<TD width="25%" valign="top"><rich:inputNumberSpinner minValue="0" maxValue="23" inputSize="2"
															value="#{vardiyaGunHome.fazlaMesaiTalep.bitSaat}">
															<a4j:support event="onchange" ajaxSingle="true" status="ajaxStatus" action="#{vardiyaGunHome.mesaiSureHesapla()}"
																reRender="secimlerTopluMesai" />
														</rich:inputNumberSpinner></TD>
													<TD align="center">:</TD>
													<TD width="25%" valign="top"><rich:inputNumberSpinner minValue="0" maxValue="59" inputSize="2" step="5"
															value="#{vardiyaGunHome.fazlaMesaiTalep.bitDakika}">
															<a4j:support event="onchange" ajaxSingle="true" status="ajaxStatus" action="#{vardiyaGunHome.mesaiSureHesapla()}"
																reRender="secimlerTopluMesai" />
														</rich:inputNumberSpinner></TD>
												</TR>
											</TABLE>

										</s:decorate>

										<s:decorate template="/layout/edit.xhtml">
											<ui:define name="label">Mesai Süresi (Saat)</ui:define>
											<h:inputText value="#{vardiyaGunHome.fazlaMesaiTalep.mesaiSuresi}" />
										</s:decorate>
										<s:decorate template="/layout/edit.xhtml">
											<ui:define name="label">Fazla Çalışma Nedeni</ui:define>
											<h:selectOneMenu value="#{vardiyaGunHome.mesaiNedenId}" styleClass="size10" required="true" style="width:85px"
												requiredMessage="Fazla Mesai Nedeni Seçiniz">
												<f:selectItem itemLabel="Lütfen seçiniz" />
												<f:selectItems value="#{vardiyaGunHome.mesaiNedenTanimList}" />
											</h:selectOneMenu>
										</s:decorate>

										<s:decorate template="/layout/edit.xhtml">
											<ui:define name="label">Açıklama</ui:define>
											<h:inputTextarea value="#{vardiyaGunHome.fazlaMesaiTalep.aciklama}" cols="80" rows="3" />
										</s:decorate>
										<s:decorate template="/layout/edit.xhtml" rendered="#{vardiyaGunHome.hareketPdksList!=null}">
											<ui:define name="label">Otomatik  Kapı Hareketi Ekle </ui:define>
											<table>
												<tr>
													<td valign="top"><h:selectBooleanCheckbox value="#{vardiyaGunHome.manuelHareketEkle}" /></td>
													<ui:fragment rendered="#{not empty vardiyaGunHome.hareketPdksList}">
														<td valign="top">
															<DIV id="manuelHareketEklex">
																<SPAN style="font-size: 12px;">#{authenticatedUser.adSoyad} kapı hareketleri</SPAN> <br /> <br />

																<rich:dataTable rowClasses="acik,koyu" style="background-color: white !important;" value="#{vardiyaGunHome.hareketPdksList}"
																	var="hareket" rows="20" rowKeyVar="row">
																	<rich:column rendered="#{vardiyaGunHome.ikRole}" style="text-align:center;">
																		<f:facet name="header">
																			<h:outputText value="Hareket No" />
																		</f:facet>
																		<h:outputText value="#{hareket.id}" />

																	</rich:column>
																	<rich:column>
																		<f:facet name="header">
																			<h:outputText value="Kapı" />
																		</f:facet>
																		<ui:fragment rendered="#{hareket.islem==null}">
																			<h:outputText value="#{hareket.kapiView.kapi.aciklama}" />
																		</ui:fragment>
																		<ui:fragment rendered="#{hareket.islem!=null}">
																			<ui:fragment rendered="#{vardiyaGunHome.ikRole==false and vardiyaGunHome.adminRole==false}">
																				<h:outputText value="#{hareket.kapiView.kapi.aciklama}" />
																			</ui:fragment>
																			<ui:fragment rendered="#{vardiyaGunHome.ikRole or vardiyaGunHome.adminRole}">
																				<a href="#" id="hareketBilgi#{hareket.id}"> <h:outputText value="#{hareket.kapiView.kapi.aciklama}" />
																				</a>

																			</ui:fragment>
																		</ui:fragment>

																	</rich:column>

																	<rich:column style="text-align:center;">
																		<f:facet name="header">
																			<h:outputText value="Zamanı" />
																		</f:facet>
																		<h:outputText value="#{authenticatedUser.dateTimeFormatla(hareket.orjinalZaman)}" />
																	</rich:column>


																	<f:facet name="footer">
																		<rich:datascroller renderIfSinglePage="false" maxPages="5" />
																	</f:facet>
																</rich:dataTable>


															</DIV>

														</td>
													</ui:fragment>
												</tr>
											</table>

										</s:decorate>


										<a4j:commandButton value="Mesai Kaydet"
											rendered="#{vardiyaGunHome.fazlaMesaiTalep.bitisZamani.after(vardiyaGunHome.fazlaMesaiTalep.baslangicZamani)}"
											onclick="#{rich:component('wait')}.show()" action="#{vardiyaGunHome.mesaiTopluKaydet()}"
											oncomplete="#{rich:component('wait')}.hide();if (#{vardiyaGunHome.fazlaMesaiTalep==null}) #{rich:component('topluMesaiTalepPanel')}.hide(); "
											reRender="secimlerTopluMesai,personelVardiyaGun" />

									</h:panelGrid></TD>
								<TD valign="top" width="%40"><rich:dataTable rowClasses="acik,koyu" value="#{vardiyaGunHome.aylikPuantajMesaiTalepList}"
										var="aylikPuantaj" rows="50" rowKeyVar="row" id="fmtAylikPuantajTable">
										<f:facet name="header">
											<h:outputText value="Fazla Çalışma Talep Personeller" />
										</f:facet>
										<rich:column style="text-align:center;" rendered="#{vardiyaGunHome.aylikPuantajMesaiTalepList.size()>1}">
											<f:facet name="header">

											</f:facet>
											<a4j:commandLink status="ajaxStatus" action="#{vardiyaGunHome.mesaiTalepListeSil(aylikPuantaj.pdksPersonel)}" ajaxSingle="true"
												id="talepDeletelink" reRender="fmtAylikPuantajTable,secimlerTopluMesai">
												<h:graphicImage value="/img/delete.gif" style="border:0" alt="Sil" />

											</a4j:commandLink>
											<rich:toolTip for="talepDeletelink" value="Sil" />

										</rich:column>
										<rich:column style="text-align:center;">
											<f:facet name="header">
												<h:outputText value="#{ortakIslemler.personelNoAciklama()}" />
											</f:facet>
											<h:outputText value="#{aylikPuantaj.pdksPersonel.pdksSicilNo}" />
										</rich:column>
										<rich:column>
											<f:facet name="header">
												<h:outputText value="Adı Soyadı" />
											</f:facet>
											<h:outputText value="#{aylikPuantaj.pdksPersonel.adSoyad}" />
										</rich:column>
									</rich:dataTable></TD>
							</TR>
						</TABLE>
					</ui:fragment>
				</a4j:outputPanel>
			</h:form>
		</rich:modalPanel>
		<rich:modalPanel id="mesaiAylikPanel" autosized="true" width="900" top="30">
			<f:facet name="header">
				<h:outputText
					value="#{vardiyaGunHome.personelAylikPuantaj.pdksPersonel.pdksSicilNo} #{vardiyaGunHome.personelAylikPuantaj.pdksPersonel.adSoyad} Fazla Çalışma Talep" />
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:form>
						<h:graphicImage value="/img/close.png" id="hidelink" styleClass="hidelink">
							<a4j:support event="onclick" reRender="vardiyaPanel" onclick="#{rich:component('wait')}.show()"
								oncomplete="if (#{facesContext.maximumSeverity==null}) { #{rich:component('mesaiAylikPanel')}.hide();#{rich:component('wait')}.hide();}"
								ajaxSingle="true" />
						</h:graphicImage>
					</h:form>
				</h:panelGroup>
			</f:facet>
			<h:form>
				<a4j:outputPanel ajaxRendered="true">
					<h:messages id="messages" styleClass="message" errorClass="errormsg" infoClass="infomsg" warnClass="warnmsg" />
				</a4j:outputPanel>
				<a4j:outputPanel id="secimlerMesai">
					<table class="mars">
						<a4j:repeat value="#{vardiyaGunHome.personelAylikPuantaj.vardiyaPlan.vardiyaHaftaList}" var="vardiyaHafta">
							<ui:fragment rendered="#{vardiyaHafta.hafta==1}">

								<tr>
									<a4j:repeat value="#{vardiyaHafta.vardiyaGunler}" var="vardiyaGun">
										<th><h:outputText value="#{authenticatedUser.getTarihFormatla(vardiyaGun.vardiyaDate, 'EEE')}" /></th>
									</a4j:repeat>
									<ui:fragment rendered="#{vardiyaGunHome.sablonGuncelle}">
										<th width="100px">Vardiya</th>
									</ui:fragment>
								</tr>
							</ui:fragment>
							<tr>
								<a4j:repeat value="#{vardiyaHafta.vardiyaGunler}" var="vardiyaGun">
									<ui:fragment rendered="#{vardiyaGun.tatil==null}">
										<th style="width: 90px"><h:outputText value="#{authenticatedUser.getTarihFormatla(vardiyaGun.vardiyaDate, 'd MMM')}" /></th>
									</ui:fragment>

									<ui:fragment rendered="#{vardiyaGun.tatil.yarimGun==true}">
										<td class="arife" title="#{vardiyaGun.tatil.ad}"
											style="width: 90px; font-family: Arial, Verdana, sans-serif; font-size: 11px; font-weight: bold; text-align: center;"><h:outputText
												value="#{authenticatedUser.getTarihFormatla(vardiyaGun.vardiyaDate, 'd MMM')}" /></td>
									</ui:fragment>
									<ui:fragment rendered="#{vardiyaGun.tatil.yarimGun==false}">
										<td class="bayram" title="#{vardiyaGun.tatil.ad}"
											style="width: 90px; font-family: Arial, Verdana, sans-serif; font-size: 11px; font-weight: bold; text-align: center;"><h:outputText
												value="#{authenticatedUser.getTarihFormatla(vardiyaGun.vardiyaDate, 'd MMM')}" /></td>
									</ui:fragment>


								</a4j:repeat>

							</tr>
							<tr>
								<a4j:repeat value="#{vardiyaHafta.vardiyaGunler}" var="vardiyaGun">
									<td style="width: 90px; height: 25px;" class="#{vardiyaGun.getAylikClassAdi(aylikPuantaj.trClass)}" align="center"><ui:fragment
											rendered="#{vardiyaGun.vardiya==null or vardiyaGun.aylikGirisYap==false or vardiyaGun.izin!=null or vardiyaGun.kullaniciYetkili==false}">
											<h:panelGrid id="veriDigerAy">
												<h:outputText value="#{vardiyaGun.aciklama}" />
											</h:panelGrid>
											<rich:toolTip for="veriDigerAy" rendered="#{vardiyaGun.title!=''}"> #{vardiyaGun.title} </rich:toolTip>
										</ui:fragment> <ui:fragment rendered="#{vardiyaGun.vardiyalar!=null and vardiyaGun.aylikGirisYap==true}">
											<DIV id="bilgiMesaiVardiya#{vardiyaGun.vardiyaKeyStr}">
												<ui:fragment rendered="#{vardiyaGun.ayinGunu and vardiyaGun.vardiya!=null}">

													<a4j:commandButton value="#{vardiyaGun.vardiya.kisaAdi}" id="mesaiVardiya" onclick="#{rich:component('wait')}.show()"
														action="#{vardiyaGunHome.mesaiGuncelle(vardiyaGun)}" ajaxSingle="true"
														oncomplete="if (#{facesContext.maximumSeverity==null}) #{rich:component('wait')}.hide(); " reRender="seciliMesaiGun" />
													<ui:fragment rendered="#{vardiyaGun.fazlaMesaiTalepler==null}">


													</ui:fragment>
													<ui:fragment rendered="#{vardiyaGun.fazlaMesaiTalepler!=null}">

														<h:graphicImage value="/img/left_16.png" style="border:0" id="bilgiMesaiVardiya" />

													</ui:fragment>


												</ui:fragment>
												<ui:fragment rendered="#{vardiyaGun.ayinGunu==false}">
													<h:outputText title="#{vardiyaGun.vardiyaAdi}" value="#{vardiyaGun.vardiya.kisaAdi}" />
												</ui:fragment>
												<rich:toolTip for="bilgiMesaiVardiya#{vardiyaGun.vardiyaKeyStr}">
													<SPAN style="font-size: 12px;"><H1>#{authenticatedUser.getTarihFormatla(vardiyaGun.vardiyaDate, 'd MMM')}
															#{vardiyaGun.vardiyaAdi}</H1> <ui:fragment rendered="#{vardiyaGun.islemVardiya!=null}">
															<c:if test="#{authenticatedUser.admin}">
																<s:formattedText value="#{fazlaMesaiOrtakIslemler.getFazlaMesaiSaatleri(vardiyaGun)}"></s:formattedText>
															</c:if>
														</ui:fragment> </SPAN>
												</rich:toolTip>
											</DIV>


										</ui:fragment></td>

								</a4j:repeat>

							</tr>
						</a4j:repeat>
					</table>


				</a4j:outputPanel>
				<a4j:outputPanel id="seciliMesaiGun">
					<rich:panel rendered="#{vardiyaGunHome.seciliVardiyaGun!=null}"
						header="#{authenticatedUser.getTarihFormatla(vardiyaGunHome.seciliVardiyaGun.vardiyaDate, 'd MMM yyyy')} ( #{vardiyaGunHome.seciliVardiyaGun.vardiyaAdi} )">

						<ui:fragment rendered="#{vardiyaGunHome.denklestirmeAyDurum and vardiyaGunHome.fazlaMesaiTalep!=null}">
							<s:formattedText value="#{fazlaMesaiOrtakIslemler.getFazlaMesaiSaatleri(vardiyaGunHome.seciliVardiyaGun)}"></s:formattedText>

							<h:panelGrid columns="1">
								<s:decorate template="/layout/edit.xhtml" rendered="#{vardiyaGunHome.fazlaMesaiTalep.guncelleyenUser!=null}">
									<ui:define name="label">Onaylacak #{ortakIslemler.yonetici2Aciklama()}</ui:define>
									<h:outputText value="#{vardiyaGunHome.fazlaMesaiTalep.guncelleyenUser.adSoyad}" />
								</s:decorate>
								<s:decorate template="/layout/edit.xhtml">
									<ui:define name="label">Mesai Başlangıç Zamanı</ui:define>

									<TABLE width="250px">
										<TR>
											<td width="49%" valign="top"><rich:calendar datePattern="#{authenticatedUser.dateFormat}"
													value="#{vardiyaGunHome.fazlaMesaiTalep.baslangicZamani}" showWeekDaysBar="false" showWeeksBar="false"
													disabled="#{vardiyaGunHome.fazlaMesaiTarihGuncelle==false}">
													<a4j:support event="onchanged" ajaxSingle="true" status="ajaxStatus" action="#{vardiyaGunHome.mesaiSureHesapla()}"
														reRender="seciliMesaiGun,secimler" />
												</rich:calendar></td>

											<TD width="25%" valign="top"><rich:inputNumberSpinner minValue="0" maxValue="23" inputSize="2"
													value="#{vardiyaGunHome.fazlaMesaiTalep.basSaat}">
													<a4j:support event="onchange" ajaxSingle="true" status="ajaxStatus" action="#{vardiyaGunHome.mesaiSureHesapla()}"
														reRender="seciliMesaiGun" />
												</rich:inputNumberSpinner></TD>
											<TD width="1%" valign="top">:</TD>
											<TD width="25%" valign="top"><rich:inputNumberSpinner minValue="0" maxValue="59" inputSize="2" step="5"
													value="#{vardiyaGunHome.fazlaMesaiTalep.basDakika}">
													<a4j:support event="onchange" ajaxSingle="true" status="ajaxStatus" action="#{vardiyaGunHome.mesaiSureHesapla()}"
														reRender="seciliMesaiGun" />
												</rich:inputNumberSpinner></TD>
										</TR>
									</TABLE>

								</s:decorate>
								<s:decorate template="/layout/edit.xhtml">
									<ui:define name="label">Mesai Bitiş Zamanı</ui:define>

									<TABLE width="250px">
										<TR>
											<TD width="49%" valign="top"><rich:calendar datePattern="#{authenticatedUser.dateFormat}"
													value="#{vardiyaGunHome.fazlaMesaiTalep.bitisZamani}" showWeekDaysBar="false" showWeeksBar="false"
													disabled="#{vardiyaGunHome.fazlaMesaiTarihGuncelle==false}">
													<a4j:support event="onchanged" ajaxSingle="true" status="ajaxStatus" action="#{vardiyaGunHome.mesaiSureHesapla()}"
														reRender="seciliMesaiGun" />
												</rich:calendar></TD>

											<TD width="25%" valign="top"><rich:inputNumberSpinner minValue="0" maxValue="23" inputSize="2"
													value="#{vardiyaGunHome.fazlaMesaiTalep.bitSaat}">
													<a4j:support event="onchange" ajaxSingle="true" status="ajaxStatus" action="#{vardiyaGunHome.mesaiSureHesapla()}"
														reRender="seciliMesaiGun" />
												</rich:inputNumberSpinner></TD>
											<TD align="center">:</TD>
											<TD width="25%" valign="top"><rich:inputNumberSpinner minValue="0" maxValue="59" inputSize="2" step="5"
													value="#{vardiyaGunHome.fazlaMesaiTalep.bitDakika}">
													<a4j:support event="onchange" ajaxSingle="true" status="ajaxStatus" action="#{vardiyaGunHome.mesaiSureHesapla()}"
														reRender="seciliMesaiGun" />
												</rich:inputNumberSpinner></TD>
										</TR>
									</TABLE>

								</s:decorate>

								<s:decorate template="/layout/edit.xhtml">
									<ui:define name="label">Mesai Süresi (Saat)</ui:define>
									<h:inputText value="#{vardiyaGunHome.fazlaMesaiTalep.mesaiSuresi}" />
								</s:decorate>
								<s:decorate template="/layout/edit.xhtml">
									<ui:define name="label">Fazla Çalışma Nedeni</ui:define>
									<h:selectOneMenu value="#{vardiyaGunHome.mesaiNedenId}" styleClass="size10" required="true" style="width:85px"
										requiredMessage="Fazla Mesai Nedeni Seçiniz">
										<f:selectItem itemLabel="Lütfen seçiniz" />
										<f:selectItems value="#{vardiyaGunHome.mesaiNedenTanimList}" />
									</h:selectOneMenu>
								</s:decorate>

								<s:decorate template="/layout/edit.xhtml">
									<ui:define name="label">Açıklama</ui:define>
									<h:inputTextarea value="#{vardiyaGunHome.fazlaMesaiTalep.aciklama}" cols="80" rows="3" />
								</s:decorate>
								<s:decorate template="/layout/edit.xhtml" rendered="#{vardiyaGunHome.hareketPdksList!=null}">
									<ui:define name="label">Otomatik  Kapı Hareketi Ekle </ui:define>
									<table>
										<tr>
											<td valign="top"><h:selectBooleanCheckbox value="#{vardiyaGunHome.manuelHareketEkle}" /></td>
											<ui:fragment rendered="#{not empty vardiyaGunHome.hareketPdksList}">
												<td valign="top">
													<DIV id="manuelHareketEklex">
														<SPAN style="font-size: 12px;">#{authenticatedUser.adSoyad} kapı hareketleri</SPAN> <br /> <br />

														<rich:dataTable rowClasses="acik,koyu" style="background-color: white !important;" value="#{vardiyaGunHome.hareketPdksList}"
															var="hareket" rows="20" rowKeyVar="row">
															<rich:column rendered="#{vardiyaGunHome.ikRole}" style="text-align:center;">
																<f:facet name="header">
																	<h:outputText value="Hareket No" />
																</f:facet>
																<h:outputText value="#{hareket.id}" />

															</rich:column>
															<rich:column>
																<f:facet name="header">
																	<h:outputText value="Kapı" />
																</f:facet>
																<ui:fragment rendered="#{hareket.islem==null}">
																	<h:outputText value="#{hareket.kapiView.kapi.aciklama}" />
																</ui:fragment>
																<ui:fragment rendered="#{hareket.islem!=null}">
																	<ui:fragment rendered="#{vardiyaGunHome.ikRole==false and vardiyaGunHome.adminRole==false}">
																		<h:outputText value="#{hareket.kapiView.kapi.aciklama}" />
																	</ui:fragment>
																	<ui:fragment rendered="#{vardiyaGunHome.ikRole or vardiyaGunHome.adminRole}">
																		<a href="#" id="hareketBilgi#{hareket.id}"> <h:outputText value="#{hareket.kapiView.kapi.aciklama}" />
																		</a>

																	</ui:fragment>
																</ui:fragment>

															</rich:column>

															<rich:column style="text-align:center;">
																<f:facet name="header">
																	<h:outputText value="Zamanı" />
																</f:facet>
																<h:outputText value="#{authenticatedUser.dateTimeFormatla(hareket.orjinalZaman)}" />
															</rich:column>


															<f:facet name="footer">
																<rich:datascroller renderIfSinglePage="false" maxPages="5" />
															</f:facet>
														</rich:dataTable>


													</DIV>

												</td>
											</ui:fragment>
										</tr>
									</table>


								</s:decorate>


								<a4j:commandButton value="Mesai Kaydet"
									rendered="#{vardiyaGunHome.fazlaMesaiTalep.bitisZamani.after(vardiyaGunHome.fazlaMesaiTalep.baslangicZamani)}"
									onclick="#{rich:component('wait')}.show()" action="#{vardiyaGunHome.mesaiKaydet(false)}"
									oncomplete="if (#{facesContext.maximumSeverity==null}) #{rich:component('wait')}.hide(); " reRender="seciliMesaiGun,secimlerMesai" />

							</h:panelGrid>
						</ui:fragment>
						<rich:dataTable rowClasses="acik,koyu" value="#{vardiyaGunHome.seciliVardiyaGun.fazlaMesaiTalepler}" var="fmt" rows="50" rowKeyVar="row"
							id="fmtTable" rendered="#{vardiyaGunHome.seciliVardiyaGun.fazlaMesaiTalepler!=null}">
							<f:facet name="header">
								<h:outputText value="Fazla Çalışma Talep Formları" />
							</f:facet>
							<rich:column style="text-align:center;" rendered="#{vardiyaGunHome.denklestirmeAyDurum}">
								<f:facet name="header">
									<h:outputText value="İşlemler" />
								</f:facet>
								<ui:fragment rendered="#{fmt.olusturanUser.id==authenticatedUser.id or vardiyaGunHome.ikRole}">
									<TABLE>
										<tr>
											<ui:fragment rendered="#{fmt.hatirlatmaMail}">
												<td><h:graphicImage value="/img/mail.png" style="border:0" height="24" id="mesaiMailHatirlatmaBilgi">
														<a4j:support event="onclick" ajaxSingle="true" status="ajaxStatus" action="#{vardiyaGunHome.mesaiMailHatirlatma(fmt)}" />
													</h:graphicImage> <rich:toolTip for="mesaiMailHatirlatmaBilgi">
														<B>Fazla çalışma talep hatırlatma mail gönder</B>
													</rich:toolTip></td>
											</ui:fragment>
											<ui:fragment rendered="#{fmt.iptalEdilebilir}">
												<td><h:graphicImage value="/img/delete.png" style="border:0" id="mesaiIptalBilgi">
														<a4j:support event="onclick" ajaxSingle="true" status="ajaxStatus" action="#{vardiyaGunHome.mesaiIptalSec(fmt)}"
															onclick="#{rich:component('wait')}.show()"
															oncomplete="if (#{facesContext.maximumSeverity==null}) {#{rich:component('mesaiIptalPanel')}.show();} #{rich:component('wait')}.hide();"
															reRender="mesaiIptalPanel" />
													</h:graphicImage> <rich:toolTip for="mesaiIptalBilgi">
														<B>Fazla çalışma talep iptal</B>
													</rich:toolTip></td>
											</ui:fragment>
										</tr>
									</TABLE>
								</ui:fragment>


							</rich:column>
							<rich:column style="text-align:center;">
								<f:facet name="header">
									<h:outputText value="Mesai Başlangıç Zamanı" />
								</f:facet>
								<h:outputText value="#{authenticatedUser.dateTimeFormatla(fmt.baslangicZamani)}" />
							</rich:column>
							<rich:column style="text-align:center;">
								<f:facet name="header">
									<h:outputText value="Mesai Bitiş Zamanı" />
								</f:facet>
								<h:outputText value="#{authenticatedUser.dateTimeFormatla(fmt.bitisZamani)}" />
							</rich:column>
							<rich:column style="text-align:center;">
								<f:facet name="header">
									<h:outputText value="Mesai Süresi (Saat)" />
								</f:facet>
								<h:outputText value="#{authenticatedUser.sayiFormatliGoster(fmt.mesaiSuresi)}" />
							</rich:column>
							<rich:column>
								<f:facet name="header">
									<h:outputText value="Mesai Nedeni" />
								</f:facet>
								<h:outputText value="#{fmt.mesaiNeden.aciklama}" id="mnd" />
								<ui:fragment rendered="#{fmt.aciklama!=null and fmt.aciklama!='' }">
									<rich:toolTip for="mnd" value="Açıklama : #{fmt.aciklama}" />
								</ui:fragment>
							</rich:column>
							<rich:column>
								<f:facet name="header">
									<h:outputText value="Onay Durum" />
								</f:facet>
								<h:outputText value="#{fmt.onayDurumAciklama}" />
							</rich:column>
							<rich:column>
								<f:facet name="header">
									<h:outputText value="Onay'a Gönderen" />
								</f:facet>
								<h:outputText value="#{fmt.olusturanUser.adSoyad}" />
							</rich:column>
							<rich:column style="text-align:center;">
								<f:facet name="header">
									<h:outputText value="Onay'a Gönderme Zamanı" />
								</f:facet>
								<h:outputText value="#{authenticatedUser.dateTimeFormatla(fmt.olusturmaTarihi)}" />
							</rich:column>
							<rich:column>
								<f:facet name="header">
									<h:outputText value="Onaylayan" />
								</f:facet>
								<h:outputText value="#{fmt.guncelleyenUser.adSoyad}" />
							</rich:column>
							<rich:column style="text-align:center;">
								<f:facet name="header">
									<h:outputText value="Onaylama Zamanı" />
								</f:facet>
								<h:outputText value="#{authenticatedUser.dateTimeFormatla(fmt.guncellemeTarihi)}" />
							</rich:column>
						</rich:dataTable>
					</rich:panel>

				</a4j:outputPanel>

			</h:form>
		</rich:modalPanel>
		<rich:modalPanel id="mesaiIptalPanel" autosized="true" width="900">
			<f:facet name="header">
				<h:outputText
					value="#{vardiyaGunHome.personelAylikPuantaj.pdksPersonel.pdksSicilNo} #{vardiyaGunHome.personelAylikPuantaj.pdksPersonel.adSoyad} Fazla Mesai İptal" />
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:form>
						<h:graphicImage value="/img/close.png" id="hidelink" styleClass="hidelink">
							<a4j:support event="onclick" onclick="#{rich:component('wait')}.show()"
								oncomplete="if (#{facesContext.maximumSeverity==null}) { #{rich:component('mesaiIptalPanel')}.hide();#{rich:component('wait')}.hide();}"
								ajaxSingle="true" />
						</h:graphicImage>
					</h:form>
				</h:panelGroup>
			</f:facet>
			<h:form>

				<a4j:outputPanel id="indirimOnay" ajaxRendered="true">
					<h:panelGrid columns="1" style="width:90%;">
						<h:panelGrid columns="2" style="width:90%;">
							<s:decorate template="/layout/edit.xhtml" style="vertical-align: top;">
								<ui:define name="label">Personel</ui:define>
								<h:outputText value="#{vardiyaGunHome.islemFazlaMesaiTalep.vardiyaGun.personel.adSoyad}" />
							</s:decorate>
							<s:decorate template="/layout/edit.xhtml" style="vertical-align: top;">
								<ui:define name="label">#{ortakIslemler.sirketAciklama()}</ui:define>
								<h:outputText value="#{vardiyaGunHome.islemFazlaMesaiTalep.vardiyaGun.personel.sirket.ad}" />
							</s:decorate>
							<s:decorate template="/layout/edit.xhtml" style="vertical-align: top;"
								rendered="#{vardiyaGunHome.islemFazlaMesaiTalep.vardiyaGun.personel.tesis!=null}">
								<ui:define name="label">#{ortakIslemler.tesisAciklama()}</ui:define>
								<h:outputText value="#{vardiyaGunHome.islemFazlaMesaiTalep.vardiyaGun.personel.tesis.aciklama}" />
							</s:decorate>
							<s:decorate template="/layout/edit.xhtml" style="vertical-align: top;"
								rendered="#{vardiyaGunHome.islemFazlaMesaiTalep.vardiyaGun.personel.ekSaha3!=null}">
								<ui:define name="label">#{vardiyaGunHome.bolumAciklama}</ui:define>
								<h:outputText value="#{vardiyaGunHome.islemFazlaMesaiTalep.vardiyaGun.personel.ekSaha3.aciklama}" />
							</s:decorate>
							<s:decorate template="/layout/edit.xhtml" style="vertical-align: top;">
								<ui:define name="label">Mesai Başlangıç Zamanı</ui:define>
								<h:outputText
									value="#{vardiyaGunHome.islemFazlaMesaiTalep.guncelleyenUser.dateTimeFormatla(vardiyaGunHome.islemFazlaMesaiTalep.baslangicZamani)}" />
							</s:decorate>
							<s:decorate template="/layout/edit.xhtml" style="vertical-align: top;">
								<ui:define name="label">Mesai Bitiş Zamanı</ui:define>
								<h:outputText value="#{vardiyaGunHome.islemFazlaMesaiTalep.guncelleyenUser.dateTimeFormatla(vardiyaGunHome.islemFazlaMesaiTalep.bitisZamani)}" />
							</s:decorate>
							<s:decorate template="/layout/edit.xhtml" style="vertical-align: top;">
								<ui:define name="label">Mesai Süre</ui:define>
								<h:outputText
									value="#{vardiyaGunHome.islemFazlaMesaiTalep.guncelleyenUser.sayiFormatliGoster(vardiyaGunHome.islemFazlaMesaiTalep.mesaiSuresi)}" />
							</s:decorate>

							<s:decorate template="/layout/edit.xhtml" style="vertical-align: top;">
								<ui:define name="label">Mesai Nedeni</ui:define>
								<h:outputText value="#{vardiyaGunHome.islemFazlaMesaiTalep.mesaiNeden.aciklama}" />
							</s:decorate>
						</h:panelGrid>
						<s:decorate template="/layout/edit.xhtml" style="vertical-align: top;">
							<ui:define name="label">İptal Nedeni</ui:define>
							<h:selectOneMenu value="#{vardiyaGunHome.islemFazlaMesaiTalep.redNedeni}" styleClass="size10" required="true" style="width:85px"
								requiredMessage="Fazla Çalışma İptal Nedeni Seçiniz">
								<s:selectItems var="comp" value="#{vardiyaGunHome.mesaiIptalNedenTanimList}" label="#{comp.aciklama}" noSelectionLabel="Lutfen Seciniz" />
								<s:convertEntity />
							</h:selectOneMenu>
						</s:decorate>
						<s:decorate template="/layout/edit.xhtml" style="vertical-align: top;">
							<ui:define name="label">İptal Açıklama</ui:define>
							<h:inputTextarea value="#{vardiyaGunHome.islemFazlaMesaiTalep.iptalAciklama}" cols="80" rows="3" />
						</s:decorate>
						<a4j:commandButton value="İptal Et" action="#{vardiyaGunHome.mesaiIptal}" rendered="#{vardiyaGunHome.mesaiIptalNedenTanimList!=null}"
							onclick="#{rich:component('wait')}.show()" reRender="fmtTable,secimler,seciliMesaiGun"
							oncomplete="#{rich:component('wait')}.hide();if (#{facesContext.maximumSeverity==null}) #{rich:component('mesaiIptalPanel')}.hide();" />

					</h:panelGrid>
				</a4j:outputPanel>
			</h:form>


		</rich:modalPanel>


		<rich:modalPanel id="saatPanel" autosized="true" width="300">
			<f:facet name="header">
				<h:outputText value="#{authenticatedUser.getTarihFormatla(vardiyaGunHome.seciliVardiyaGun.vardiyaDate, 'd MMMMM yyyy')} Çalışma Planı Güncelleme" />
			</f:facet>
			<f:facet name="controls">
				<h:panelGroup>
					<h:form>
						<h:graphicImage value="/img/close.png" id="hideSaatLink" styleClass="hideSaatLink">
							<a4j:support event="onclick" status="ajaxStatus" oncomplete="if (#{facesContext.maximumSeverity==null}) #{rich:component('saatPanel')}.hide();"
								ajaxSingle="true" reRender="editAylikPanel" />
						</h:graphicImage>
					</h:form>
				</h:panelGroup>
			</f:facet>
			<h:form>
				<a4j:outputPanel ajaxRendered="true">
					<h:messages id="messages" styleClass="message" errorClass="errormsg" infoClass="infomsg" warnClass="warnmsg" />
				</a4j:outputPanel>


				<h:panelGrid columns="8" rendered="#{vardiyaGunHome.seciliVardiyaGun!=null}">

					<rich:inputNumberSpinner styleClass="size10" inputStyle="width:20px" minValue="0" maxValue="23" inputSize="1"
						value="#{vardiyaGunHome.seciliVardiyaGun.basSaat}">
						<a4j:support event="onchange" action="#{vardiyaGunHome.seciliVardiyaGun.setGuncellendi(true)}" />
					</rich:inputNumberSpinner>
					<h:outputText value=":" styleClass="size10" />
					<rich:inputNumberSpinner styleClass="size10" inputStyle="width:20px" minValue="0" maxValue="59" inputSize="1" step="5"
						value="#{vardiyaGunHome.seciliVardiyaGun.basDakika}">
						<a4j:support event="onchange" action="#{vardiyaGunHome.seciliVardiyaGun.setGuncellendi(true)}" />
					</rich:inputNumberSpinner>
					<h:outputText value="-" styleClass="size10" />
					<rich:inputNumberSpinner styleClass="size10" inputStyle="width:20px" minValue="0" maxValue="23" inputSize="1"
						value="#{vardiyaGunHome.seciliVardiyaGun.bitSaat}">
						<a4j:support event="onchange" action="#{vardiyaGunHome.seciliVardiyaGun.setGuncellendi(true)}" />
					</rich:inputNumberSpinner>
					<h:outputText value=":" styleClass="size10" />
					<rich:inputNumberSpinner styleClass="size10" inputStyle="width:20px" minValue="0" maxValue="59" inputSize="1" step="5"
						value="#{vardiyaGunHome.seciliVardiyaGun.bitDakika}">
						<a4j:support event="onchange" action="#{vardiyaGunHome.seciliVardiyaGun.setGuncellendi(true)}" />
					</rich:inputNumberSpinner>
				</h:panelGrid>
			</h:form>
		</rich:modalPanel>
	</ui:define>

</ui:composition>
